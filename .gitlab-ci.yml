image: node # podemos utilizar imagens dockers personalizadas

stages: # caso não definamos os estágios, por padrão ele seguirá os 3 estágios abaixos 
  - build
  - test
  - deploy

build site: # job - define o bloco do pipeline - podem haver diversos jobs - cada job deve ter um nome único 
  stage: build # especificamos que queros apenas o build
  artifacts: # podemos especificar pastas
    name: "$CI_JOB_NAME-$CI_COMMIT_REF_NAME" # nome do artefato (estamos utilizando variaveis do gitlab)
    when: always # podemos especificar quando queremos executar o artefato
    expire_in: 2h20min # tempo que o artefato fica disponível
    paths:  
      - ./website/build/missaodevops

  script: 
  - ls -ltra
  - pwd
  - whoami
  - npm --version
  - cd website
  - npm install
  - npm run build

